<div class="movies-page-container">
  <!-- General Carousels -->

  <app-carousel title="Recommended Movies" [movies]="movies"></app-carousel>
  <app-carousel title="Latest Movies" [movies]="LatestMovies"></app-carousel>
  <app-expanded-carousel [title]="'Top Rated Movies'" [movies]="topRatedMovies"></app-expanded-carousel>


  <div #afterTopRated class="defer-trigger" aria-hidden="true"></div>

  @defer (on timer(2000)) {
  @defer (on viewport(afterTopRated)) {
  <!-- Dynamic Genre Carousels -->
  @for (genre of genres; track genre.genreId) {
  @if (genreMoviesMap[genre.genreId].length) {
  <app-carousel [title]="genre.name" [movies]="genreMoviesMap[genre.genreId]"></app-carousel>
  }
  }
  }@placeholder{
  <app-loading-spinner></app-loading-spinner>
  }
  }
  @placeholder{
  <app-loading-spinner></app-loading-spinner>
  }

</div>